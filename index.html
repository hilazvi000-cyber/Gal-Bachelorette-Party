
import React, { useState } from 'react';
import { Home, Plane, ShoppingBag, Sun, PlaneTakeoff, Menu, X, ArrowRight } from 'lucide-react';

// --- × ×ª×•× ×™ ×”×œ×•"×– ---
const scheduleData = {
  day1: {
    title: "×™×•× ×¨××©×•×Ÿ: ×”×’×¢× ×•!",
    icon: Plane,
    activities: [
      "×˜×™×¡×” ×•×“×¨×›×™ ×”×’×¢×” (××œ××•×ª ×”×ª×¨×’×©×•×ª!)",
      "×¦'×§-××™×Ÿ ×œ××œ×•×Ÿ ×•×”×ª××§××•×ª ×‘×¡×˜×™×™×œ.",
      "×™×•×¦××•×ª ×œ×¡×™×‘×•×‘ ×¨××©×•×Ÿ ×‘×©×“×¨×” ×”××¨×›×–×™×ª ×©×œ ×¨×•××.",
      "×—×•×–×¨×•×ª ×œ×—×“×¨ ×œ×”×ª××¨×’× ×•×ª ×§×œ×” ×•×“×¨×™× ×§ ×¤×ª×™×—×”.",
      "×¢×¨×‘: ××¡×¢×“×ª ×¢×¨×‘ ××™×˜×œ×§×™×ª ×œ×¤×ª×•×— ××ª ×”×˜×™×•×œ. ğŸ"
    ]
  },
  day2: {
    title: "×™×•× ×©× ×™: ×©×•×¤×™× ×’ ×•××©×”×• ××™×•×—×“",
    icon: ShoppingBag,
    activities: [
      "××¨×•×—×ª ×‘×•×§×¨ ×•×§×¤×•×¦'×™× ×• ×©×œ ×‘×•×§×¨.",
      "××¡×ª×•×‘×‘×™× ×‘×¢×™×¨ ×•×¢×•×©×™× ×©×•×¤×™× ×’ (×›×™ ××’×™×¢ ×œ× ×•!).",
      { 
        type: 'special',
        title: '×”×•×œ×›×•×ª ×œ××§×•× ××™×•×—×“ ×‘×¨×•××! (×‘×œ×™ ×œ×©×‘×•×¨ ×§×•×¤×” ğŸ’°)',
        optionsTitle: '××•×¤×¦×™×•×ª ×—×™× ××™×•×ª ×œ×‘×—×™×¨×”:',
        options: [
          "××–×¨×§×ª ×˜×¨×•×•×™ (Fontana di Trevi)",
          "×”××“×¨×’×•×ª ×”×¡×¤×¨×“×™×•×ª (Piazza di Spagna)",
          "×’× ×™ ×”×ª×¤×•×–×™× (Giardino degli Aranci)",
          "×©×™×˜×•×˜ ×‘×˜×¨×¡×˜×•×•×¨×” (Trastevere)",
          "×”×¤× ×ª×™××•×Ÿ (Pantheon)"
        ]
      },
      "×—×•×–×¨×•×ª ×œ××œ×•×Ÿ ×œ×”×ª××¨×’×Ÿ, ××•×–×™×§×” ×‘×¤×•×œ ×•×•×œ×™×•×.",
      "×¢×¨×‘ ×‘×—×“×¨: ××©×—×§×™ ×—×‘×¨×”, ××œ×›×•×”×•×œ ×•×¦×—×•×§×™×. ğŸ¥‚",
      "×¢×¨×‘: ×™×•×¦××•×ª ×œ××¡×¢×“×” ×©×•×•×” ×‘××™×•×—×“."
    ]
  },
  day3: {
    title: "×™×•× ×©×œ×™×©×™: ×¤××©×Ÿ ×•×©×™×§",
    icon: Sun,
    activities: [
      "××¨×•×—×ª ×‘×•×§×¨ ××•×§×“××ª (×™×—×¡×™×ª...).",
      "×™×•×¦××•×ª ×œ×¡×™×•×¨ ××•×¤× ×” ×‘×¨×•×× (×›×™ ××’×™×¢ ×œ× ×•!).",
      "×××©×™×›×•×ª ×œ×”×¡×ª×•×‘×‘ ×¢×•×“ ×‘×¢×™×¨, ××•×œ×™ ×©×•×¤×™× ×’ ×”×©×œ××•×ª?",
      "×’'×œ××˜×• ×—×•×‘×”! ğŸ¦",
      "×¢×¨×‘: ××¡×¢×“×ª ×¢×¨×‘ ××—×¨×•× ×” ×•××¤× ×§×ª ×‘××™×•×—×“."
    ]
  },
  day4: {
    title: "×™×•× ×¨×‘×™×¢×™: ×‘×™×™ ×‘×™×™ ×¨×•××",
    icon: PlaneTakeoff,
    activities: [
      "××¨×•×—×ª ×‘×•×§×¨ ××—×¨×•× ×” (×•×”×¨×‘×” ×§×¤×”).",
      "××ª×›×•× × ×™× ×œ×¦'×§-×××•×˜ ×•×¢×•×–×‘×™× ××ª ×”××œ×•×Ÿ.",
      "×¢×•×“ ×¡×™×‘×•×‘ ×§×˜×Ÿ ×‘×¢×™×¨ ×œ×§× ×™×•×ª ××—×¨×•× ×•×ª ×•××–×›×¨×•×ª.",
      "×™×¦×™××” ×œ×©×“×” ×”×ª×¢×•×¤×”. ğŸ’”",
      "(×—×•×–×¨×•×ª ×œ××¨×¥ ×¢× ××œ× ×—×•×•×™×•×ª ×•×’×¢×’×•×¢×™×)."
    ]
  }
};

// ×¤×•× ×˜ ××™×•×—×“ ×œ×›×•×ª×¨×•×ª
const amaticFont = { fontFamily: "'Amatic SC', cursive" };

// --- ×§×•××¤×•× × ×˜×ª ×›×•×ª×¨×ª ×¢×œ×™×•× ×” (Header) ---
function AppHeader({ setIsMenuOpen, view }) {
  const getTitle = () => {
    if (view === 'home') return ""; // <--- ×”×¡×¨×ª×™ ××ª ×”×›×•×ª×¨×ª ××“×£ ×”×‘×™×ª
    if (scheduleData[view]) return scheduleData[view].title;
    return "×”×œ×•'×– ×©×œ× ×•";
  };

  return (
    <div className="flex items-center justify-between p-4 bg-orange-50 sticky top-0 z-20 w-full" dir="rtl">
      {/* ×›×•×ª×¨×ª ×“×™× ××™×ª */}
      <h2 style={amaticFont} className="text-3xl text-red-900 font-bold truncate">
        {getTitle()}
      </h2>
      
      {/* ×›×¤×ª×•×¨ ×ª×¤×¨×™×˜ ×”××‘×•×¨×’×¨ */}
      <button 
        onClick={() => setIsMenuOpen(true)}
        className="text-red-900 p-2 rounded-full hover:bg-red-100 transition-colors"
        aria-label="×¤×ª×™×—×ª ×ª×¤×¨×™×˜"
      >
        <Menu size={24} />
      </button>
    </div>
  );
}

// --- ×§×•××¤×•× × ×˜×ª ×ª×¤×¨×™×˜ ×¦×“ (Sidebar) ---
function Sidebar({ isOpen, setIsMenuOpen, setView }) {
  const menuItems = [
    { key: 'home', text: '×“×£ ×”×‘×™×ª', icon: Home },
    { key: 'day1', text: '×™×•× 1: ×”×’×¢× ×•!', icon: Plane },
    { key: 'day2', text: '×™×•× 2: ×©×•×¤×™× ×’', icon: ShoppingBag },
    { key: 'day3', text: '×™×•× 3: ×¤××©×Ÿ', icon: Sun },
    { key: 'day4', text: '×™×•× 4: ×‘×™×™ ×‘×™×™', icon: PlaneTakeoff },
  ];

  const navigate = (view) => {
    setView(view);
    setIsMenuOpen(false);
  };

  return (
    <>
      {/* ×¨×§×¢ ×›×”×” ×›×©×¤×ª×•×— */}
      <div 
        className={`fixed inset-0 bg-black/50 z-30 transition-opacity ${isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}
        onClick={() => setIsMenuOpen(false)}
      ></div>
      
      {/* ×ª×¤×¨×™×˜ ×”×¦×“ ×¢×¦××• */}
      <div 
        className={`fixed top-0 right-0 bottom-0 w-72 bg-orange-50 shadow-xl z-40 transition-transform ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}
        dir="rtl"
      >
        {/* ×›×•×ª×¨×ª ×ª×¤×¨×™×˜ ×•×›×¤×ª×•×¨ ×¡×’×™×¨×” */}
        <div className="flex items-center justify-between p-4 border-b border-red-200">
          <h3 style={amaticFont} className="text-3xl text-red-900 font-bold">×ª×¤×¨×™×˜</h3>
          <button 
            onClick={() => setIsMenuOpen(false)}
            className="text-red-900 p-2 rounded-full hover:bg-red-100 transition-colors"
            aria-label="×¡×’×™×¨×ª ×ª×¤×¨×™×˜"
          >
            <X size={24} />
          </button>
        </div>
        
        {/* ×¤×¨×™×˜×™ ×ª×¤×¨×™×˜ */}
        <nav className="p-4 space-y-2">
          {menuItems.map(item => (
            <button
              key={item.key}
              onClick={() => navigate(item.key)}
              className="w-full flex items-center p-3 rounded-lg text-right text-lg text-red-900 hover:bg-red-100 transition-colors"
            >
              <item.icon size={20} className="ml-3 flex-shrink-0" />
              <span>{item.text}</span>
            </button>
          ))}
        </nav>
      </div>
    </>
  );
}

// --- ×§×•××¤×•× × ×˜×ª ×“×£ ×”×‘×™×ª ---
function HomePage() {
  return (
    <div className="flex flex-col h-full" dir="rtl">
      {/* ×›×•×ª×¨×ª */}
      <div className="text-center p-10 bg-orange-50 flex-grow flex flex-col items-center justify-center">
        <h1 style={amaticFont} className="text-7xl sm:text-8xl font-bold text-red-900">Gal's Bachelorette Weekend!</h1>
        <p style={amaticFont} className="text-4xl sm:text-5xl text-red-900 mt-2">â™¥</p>
      </div>
    </div>
  );
}

// --- ×§×•××¤×•× × ×˜×ª ×ª×¦×•×’×ª ×™×•× ---
function DayView({ dayData }) {
  return (
    <div className="flex flex-col h-full" dir="rtl">
      {/* ×ª×•×›×Ÿ ×”×œ×•"×– */}
      <ul className="p-6 space-y-4 text-red-900 text-lg overflow-y-auto flex-grow">
        {dayData.activities.map((activity, index) => {
          if (typeof activity === 'string') {
            return (
              <li key={index} className="flex items-start">
                <span className="text-red-900 ml-3 mt-1 flex-shrink-0">â—†</span>
                <span>{activity}</span>
              </li>
            );
          } else if (activity.type === 'special') {
            return (
              <li key={index}>
                <div className="flex items-start">
                  <span className="text-red-900 ml-3 mt-1 flex-shrink-0">â—†</span>
                  <span className="font-semibold">{activity.title}</span>
                </div>
                {/* ×ª×™×‘×ª ×”××•×¤×¦×™×•×ª */}
                <div className="mt-3 mr-6 p-4 bg-orange-100 rounded-lg border-l-4 border-red-200">
                  <h4 className="font-bold text-red-900 mb-2">{activity.optionsTitle}</h4>
                  <ul className="list-decimal list-inside space-y-1 text-red-700">
                    {activity.options.map((opt, i) => <li key={i}>{opt}</li>)}
                  </ul>
                </div>
              </li>
            );
          }
          return null;
        })}
      </ul>
    </div>
  );
}

// --- ×§×•××¤×•× × ×˜×ª ×”××¤×œ×™×§×¦×™×” ×”×¨××©×™×ª ---
export default function App() {
  const [view, setView] = useState('home'); // 'home', 'day1', 'day2', ×•×›×•'
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  // ×¤×•× ×§×¦×™×” ×œ×‘×—×™×¨×ª ×”×ª×¦×•×’×”
  const renderView = () => {
    if (view === 'home') {
      return <HomePage />;
    }
    
    // ×‘×“×™×§×” ×× ×”×ª×¦×•×’×” ×”×™× ×™×•× ×§×™×™× (×œ××©×œ 'day1')
    if (scheduleData[view]) {
      return <DayView dayData={scheduleData[view]} />;
    }
    
    // ×‘×¨×™×¨×ª ××—×“×œ - ×—×–×¨×” ×”×‘×™×ª×”
    return <HomePage />;
  };

  return (
    // ×”×¨×§×¢ ×”×›×œ×œ×™ ×©×œ ×”×¢××•×“
    <div className="bg-gray-100 min-h-screen p-4 flex items-center justify-center" style={{ fontFamily: "'Heebo', sans-serif" }}>
        {/*
          ×–×” ×™×•×¦×¨ ××ª ×”××¡×’×¨×ª ×”×œ×‘× ×”
          ×©××“××” ××¡×š ×©×œ ××¤×œ×™×§×¦×™×”
        */}
        <div className="w-full max-w-md bg-orange-50 rounded-2xl shadow-xl overflow-hidden relative" style={{ height: '90vh', minHeight: '600px' }}>
          {/* ×˜×¢×™× ×ª ×¤×•× ×˜×™× ××’×•×’×œ */}
          <link rel="preconnect" href="https://fonts.googleapis.com" />
          <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="true" />
          <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&family=Amatic+SC:wght@700&display=swap" rel="stylesheet" />

          {/* ×ª×¤×¨×™×˜ ×¦×“ × ×¡×ª×¨ */}
          <Sidebar isOpen={isMenuOpen} setIsMenuOpen={setIsMenuOpen} setView={setView} />
          
          {/* ×›×•×ª×¨×ª ×¢×œ×™×•× ×” ×§×‘×•×¢×” */}
          <AppHeader setIsMenuOpen={setIsMenuOpen} view={view} />

          {/* ×’×•×£ ×”××¤×œ×™×§×¦×™×” ×©××©×ª× ×” */}
          <div className="h-[calc(100%-68px)] overflow-y-auto">
            {renderView()}
          </div>
        </div>
    </div>
  );
}


